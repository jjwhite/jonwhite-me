function onYouTubeIframeAPIReady(){for(var e=0;e<tollMediaSwipe.slidesAwaitingAPI.length;e++)"youtube"===tollMediaSwipe.slidesAwaitingAPI[e].type&&tollMediaSwipe.insertYouTubeObject(tollMediaSwipe.slidesAwaitingAPI[e])}function onSitePlanAPIReady(){for(var e=0;e<tollMediaSwipe.slidesAwaitingAPI.length;e++)"siteplan"===tollMediaSwipe.slidesAwaitingAPI[e].type&&tollMediaSwipe.insertSitePlanObject(tollMediaSwipe.slidesAwaitingAPI[e])}function MediaSwipe(){this.screenWidth,this.screenHeight,this.gallery,this.galleryLength,this.isActive,this.currentIndex,this.slidesAwaitingAPI,this.sitePlans,this.loadedCommunityIds,this.$mediaSwipe,this.$mediaSwipeTouchpad,this.$currentSlide,this.$currentSlideContainer,this.$previousSlide,this.$previousSlideContainer,this.$nextSlide,this.$nextSlideContainer,this.$futureSlide,this.$slideIndexes,this.$slideCaption,this.animator,this.pointerHandler}function MSPointerHandler(){this.start,this.end,this.secondStart,this.secondEnd,this.mouseDown,this.swiping,this.panning}function MSAnimator(){this.currentTime,this.previousTime,this.deltaTime,this.animations=[],this.foundAnimation=!1}var tollMediaSwipe;!function(e,i){function t(){if(!n){n=!0;for(var e=0;e<l.length;e++)l[e].fn.call(window,l[e].ctx);l=[]}}function a(){"complete"===document.readyState&&t()}e=e||"docReady",i=i||window;var l=[],n=!1,d=!1;i[e]=function(e,i){return n?void setTimeout(function(){e(i)},1):(l.push({fn:e,ctx:i}),void("complete"===document.readyState?setTimeout(t,1):d||(document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):(document.attachEvent("onreadystatechange",a),window.attachEvent("onload",t)),d=!0)))}}("docReady",window),docReady(function(){tollMediaSwipe=new MediaSwipe,tollMediaSwipe.init()}),MediaSwipe.prototype.init=function(){this.screenWidth=window.innerWidth,this.screenHeight=window.innerHeight,this.isActive=!1,this.requiresYouTubeAPI=!1,this.slidesAwaitingAPI=[],this.sitePlans=[],this.loadedCommunityIds=[],this.$mediaSwipe=document.getElementById("mediaswipe-container"),this.$mediaSwipe||(this.appendMediaSwipeDOM(),this.$mediaSwipe=document.getElementById("mediaswipe-container")),this.$mediaSwipeTouchpad=document.getElementById("mediaswipe-touchpad"),this.$currentSlide=document.getElementById("mediaswipe-slide1"),this.$currentSlideContainer=document.getElementById("mediaswipe-slide1-container"),this.$previousSlide=document.getElementById("mediaswipe-slide2"),this.$previousSlideContainer=document.getElementById("mediaswipe-slide2-container"),this.$nextSlide=document.getElementById("mediaswipe-slide3"),this.$nextSlideContainer=document.getElementById("mediaswipe-slide3-container"),this.$futureSlide=!1,this.$slideIndexes=document.getElementById("mediaswipe-gallery-indexes"),this.$slideCaption=document.getElementById("mediaswipe-slide-caption"),this.animator=new MSAnimator,this.animator.init(),this.pointerHandler=new MSPointerHandler,this.pointerHandler.init(),this.initiateListeners()},MediaSwipe.prototype.appendMediaSwipeDOM=function(){var e=document.createElement("div");e.id="mediaswipe-container";var i="";i+='<div id="mediaswipe-touchpad" class="mediaswipe-slides-container">',i+='<div id="mediaswipe-slide1" class="mediaswipe-slide mediaswipe-current-slide">',i+='<div id="mediaswipe-slide1-container" class="mediaswipe-slide-container mediaswipe-op-transition"></div>',i+="</div>",i+='<div id="mediaswipe-slide2" class="mediaswipe-slide mediaswipe-previous-slide">',i+='<div id="mediaswipe-slide2-container" class="mediaswipe-slide-container mediaswipe-op-transition"></div>',i+="</div>",i+='<div id="mediaswipe-slide3" class="mediaswipe-slide mediaswipe-next-slide">',i+='<div id="mediaswipe-slide3-container" class="mediaswipe-slide-container mediaswipe-op-transition"></div>',i+="</div>",i+='<div class="mediaswipe-invisible-overlay"></div>',i+="</div>",i+='<div class="mediaswipe-top-bar">',i+='<div id="mediaswipe-gallery-indexes"></div>',i+='<button type="button" id="mediaswipe-close-button" class="mediaswipe-close-button mediaswipe-op-transition"><span></span></button>',i+="</div>",i+='<div class="mediaswipe-bottom-bar">',i+='<div id="mediaswipe-slide-caption"></div>',i+="</div>",i+='<button type="button" id="mediaswipe-left-arrow" class="mediaswipe-arrow mediaswipe-left-arrow mediaswipe-all-transition"><span></span></button>',i+='<button type="button" id="mediaswipe-right-arrow" class="mediaswipe-arrow mediaswipe-right-arrow mediaswipe-all-transition"><span></span></button>',i+='<div class="mediaswipe-overlay mediaswipe-op-transition"></div>',e.innerHTML=i,document.getElementsByTagName("body")[0].appendChild(e)},MediaSwipe.prototype.gatherMedia=function(e){var i,t=[],a=this.getMediaProperties(e),l=document.getElementsByClassName("js-mediaSwipe"),n=document.getElementsByClassName("js-mediaswipe");this.gallery=new Array;var d=new Array;if(this.currentIndex=0,l.length)for(var s=0;s<l.length;s++)i=this.getMediaProperties(l[s]),(a===!1&&i!==!1&&"undefined"==typeof t[i.src]||i!==!1&&"undefined"==typeof t[i.src]&&i.category===a.category)&&(t[i.src]=!0,i.index=this.gallery.length,i.displayIndex=this.gallery.length+1,this.gallery.push(i),d.push(i),0===this.currentIndex&&i.src===a.src&&(this.currentIndex=this.gallery.length-1));if(n.length)for(var s=0;s<n.length;s++)i=this.getMediaProperties(n[s]),(a===!1&&i!==!1&&"undefined"==typeof t[i.src]||i!==!1&&"undefined"==typeof t[i.src]&&i.category===a.category)&&(t[i.src]=!0,i.index=this.gallery.length,i.displayIndex=this.gallery.length+1,this.gallery.push(i),d.push(i),0===this.currentIndex&&i.src===a.src&&(this.currentIndex=this.gallery.length-1));if(2===this.gallery.length){var o=this.gallery.length,r=1;if(l.length)for(var s=0;s<l.length;s++)i=this.getMediaProperties(l[s]),(a===!1&&i!==!1||i!==!1&&i.category===a.category)&&(i.index=o,i.displayIndex=r,this.gallery.push(i),o++,r++);if(n.length)for(var s=0;s<n.length;s++)i=this.getMediaProperties(l[s]),(a===!1&&i!==!1||i!==!1&&i.category===a.category)&&(i.index=o,i.displayIndex=r,this.gallery.push(i),o++,r++);this.galleryLength=2}else this.galleryLength=this.gallery.length},MediaSwipe.prototype.launch=function(){this.isActive=!0,this.addClass(this.$mediaSwipe,"on"),this.$futureSlide=!1,this.gallery.length>1?this.addClass(this.$mediaSwipe,"mediaswipe-allow-arrows"):this.removeClass(this.$mediaSwipe,"mediaswipe-allow-arrows"),this.setSlides(this.currentIndex)},MediaSwipe.prototype.setSlides=function(e){this.currentIndex=e,this.$slideIndexes.innerHTML=this.galleryLength>1?this.gallery[this.currentIndex].displayIndex+" / "+this.galleryLength:"",this.gallery[this.currentIndex].caption!==!1&&""!==this.gallery[this.currentIndex].caption?(this.$slideCaption.innerHTML=this.gallery[this.currentIndex].caption,this.addClass(this.$slideCaption,"on")):this.removeClass(this.$slideCaption,"on");var i=this.getNextIndex(-1),t=this.getNextIndex(1);if(this.removeClass(this.$mediaSwipe,"ms-zoom-in"),this.removeClass(this.$mediaSwipe,"ms-zoom-out"),this.removeClass(this.$mediaSwipe,"ms-grabbing"),this.removeClass(this.$mediaSwipe,"ms-grab"),this.gallery[this.currentIndex].disableTouchpad&&!this.hasClass(this.$mediaSwipe,"disable-touchpad")?this.addClass(this.$mediaSwipe,"disable-touchpad"):!this.gallery[this.currentIndex].disableTouchpad&&this.hasClass(this.$mediaSwipe,"disable-touchpad")&&this.removeClass(this.$mediaSwipe,"disable-touchpad"),"undefined"!=typeof this.gallery[i].youTubeObject&&"function"==typeof this.gallery[i].youTubeObject.getPlayerState&&1===this.gallery[i].youTubeObject.getPlayerState()&&this.gallery[i].youTubeObject.pauseVideo(),"undefined"!=typeof this.gallery[t].youTubeObject&&"function"==typeof this.gallery[t].youTubeObject.getPlayerState&&1===this.gallery[t].youTubeObject.getPlayerState()&&this.gallery[t].youTubeObject.pauseVideo(),this.$futureSlide===!1)this.resetSlides(),this.gallery[this.currentIndex].domSlide=this.$currentSlide,this.gallery[this.currentIndex].domContainer=this.$currentSlideContainer,this.insertMedia(this.gallery[this.currentIndex]),this.gallery.length>1&&(this.gallery[i].domContainer=this.$previousSlideContainer,this.gallery[i].domSlide=this.$previousSlide,this.gallery[t].domContainer=this.$nextSlideContainer,this.gallery[t].domSlide=this.$nextSlide,this.insertMedia(this.gallery[i]),this.insertMedia(this.gallery[t]));else{if(this.hasClass(this.$futureSlide,"mediaswipe-previous-slide")){var a=this.$previousSlideContainer;this.$previousSlide=this.$nextSlide,this.$previousSlideContainer=this.$nextSlideContainer,this.$nextSlide=this.$currentSlide,this.$nextSlideContainer=this.$currentSlideContainer,this.$currentSlide=this.$futureSlide,this.$currentSlideContainer=a,this.gallery[i].domContainer=this.$previousSlideContainer,this.gallery[i].domSlide=this.$previousSlide,this.resetSlide(this.gallery[i]),this.insertMedia(this.gallery[i])}else if(this.hasClass(this.$futureSlide,"mediaswipe-next-slide")){var a=this.$nextSlideContainer;this.$nextSlide=this.$previousSlide,this.$nextSlideContainer=this.$previousSlideContainer,this.$previousSlide=this.$currentSlide,this.$previousSlideContainer=this.$currentSlideContainer,this.$currentSlide=this.$futureSlide,this.$currentSlideContainer=a,this.gallery[t].domContainer=this.$nextSlideContainer,this.gallery[t].domSlide=this.$nextSlide,this.resetSlide(this.gallery[t]),this.insertMedia(this.gallery[t])}this.moveSlides(0),this.removeClass(this.$currentSlide,"mediaswipe-previous-slide"),this.removeClass(this.$currentSlide,"mediaswipe-next-slide"),this.addClass(this.$currentSlide,"mediaswipe-current-slide"),this.removeClass(this.$previousSlide,"mediaswipe-current-slide"),this.removeClass(this.$previousSlide,"mediaswipe-next-slide"),this.addClass(this.$previousSlide,"mediaswipe-previous-slide"),this.removeClass(this.$nextSlide,"mediaswipe-previous-slide"),this.removeClass(this.$nextSlide,"mediaswipe-current-slide"),this.addClass(this.$nextSlide,"mediaswipe-next-slide")}},MediaSwipe.prototype.insertMedia=function(e){if("image"===e.type){var i=new Image;i.ignoreOnLoad=!1,0===e.width?(i.galleryIndex=e.index,i.parent=e.domSlide,i.onload=function(){this.ignoreOnLoad===!1&&(tollMediaSwipe.addClass(this.parent,"loaded"),tollMediaSwipe.gallery[this.galleryIndex].width=this.naturalWidth||this.width,tollMediaSwipe.gallery[this.galleryIndex].height=this.naturalHeight||this.height,tollMediaSwipe.fitMedia(tollMediaSwipe.gallery[this.galleryIndex]))},i.src=e.src,i.complete&&(i.ignoreOnLoad=!0,e.domObject=i,tollMediaSwipe.addClass(e.domSlide,"loaded"),tollMediaSwipe.gallery[i.galleryIndex].width=i.naturalWidth||i.width,tollMediaSwipe.gallery[i.galleryIndex].height=i.naturalHeight||i.height,tollMediaSwipe.fitMedia(tollMediaSwipe.gallery[i.galleryIndex])),e.domContainer.appendChild(i),e.domObject=i):(i.src=e.src,e.domContainer.appendChild(i),e.domObject=i,this.addClass(e.domSlide,"loaded"),this.fitMedia(e))}else if("youtube"===e.type){var t=document.createElement("div");if(t.id="youtube"+e.index,t.style.width=e.width,t.style.height=e.height,e.domContainer.appendChild(t),e.domObject=t,"undefined"==typeof window.YT){if("undefined"==typeof window.mediaSwipeCalledYTAPI){window.mediaSwipeCalledYTAPI=!0;var a=document.createElement("script");a.src="https://www.youtube.com/iframe_api";var l=document.getElementsByTagName("script")[0];l.parentNode.insertBefore(a,l)}this.slidesAwaitingAPI.push(e)}else this.insertYouTubeObject(e)}else if("siteplan"===e.type){var t=document.createElement("div");t.id="siteplan"+e.index,t.style.width=e.width,t.style.height=e.height,e.domContainer.appendChild(t),e.domObject=t;var n=document.createElement("img");if(n.src="",n.id="siteplan"+e.index+"image",n.style.width="100%",n.style.height="100%",e.domObject.appendChild(n),"undefined"==typeof window.toll||"undefined"==typeof window.toll.sitePlan){if("undefined"==typeof window.mediaSwipeCalledSPAPI){var a=document.createElement("script");a.src="https://www.tollbrothers.com/tb/ws_siteplan/js/toll.ws_site_plan.js";var l=document.getElementsByTagName("script")[0];l.parentNode.insertBefore(a,l);var d=document.createElement("link");d.setAttribute("rel","stylesheet"),d.setAttribute("type","text/css"),d.setAttribute("href","http://cdn.tollbrothers.com/tb/ws_siteplan/css/toll.ws_site_plan.min.css"),document.getElementsByTagName("head")[0].appendChild(d),window.mediaSwipeCalledSPAPI=setInterval(function(){"undefined"!=typeof window.toll&&"undefined"!=typeof window.toll.sitePlan&&(clearInterval(window.mediaSwipeCalledSPAPI),window.mediaSwipeCalledSPAPI=!0,onSitePlanAPIReady())},250)}this.slidesAwaitingAPI.push(e)}else this.insertSitePlanObject(e)}},MediaSwipe.prototype.normalizeURL=function(e,i){return e=e.replace(/^http[s]*:/i,""),/tollbrothers.com/i.test(e)||/www\.youtube\.com/i.test(e)||(e="//www.tollbrothers.com"+e),e},MediaSwipe.prototype.insertSitePlanObject=function(e){var i=this.getNextIndex(-1),t=this.getNextIndex(1);if(e.index!==this.currentIndex&&e.index!==i&&e.index!==t)return!1;for(var a=!1,l=0;l<this.loadedCommunityIds.length;l++)if(this.loadedCommunityIds[l]===e.commId){a=!0;break}if(a)for(var l=0;l<this.sitePlans.length;l++)if(this.sitePlans[l].base.mmid===parseInt(e.src)){console.log("here!");var n=this.sitePlans[l];if(this.fitMedia(e),n.interactive&&this.screenWidth>1180){var d=document.getElementById("siteplan"+e.index+"image");d.src=this.normalizeURL(n.interactive.src),toll.sitePlan.abort(),toll.sitePlan.init(n.interactive.map_name,"#siteplan"+e.index,e.commId),toll.sitePlan.show()}else e.type="image",e.src=this.normalizeURL(n.base.S1800x815?n.base.S1800x815:n.base.link);tollMediaSwipe.addClass(tollMediaSwipe.gallery[l].domSlide,"loaded");break}a||(console.log(e.commId+" is loading..."),this.loadedCommunityIds.push(e.commId),e.sitePlanReady=function(e){for(var i=0;i<e.siteplans.length;i++)tollMediaSwipe.sitePlans.push(e.siteplans[i]);tollMediaSwipe.insertSitePlanObject(this)},toll.sitePlan.load(e.commId,e.sitePlanReady.bind(e)))},MediaSwipe.prototype.insertYouTubeObject=function(e){var i=this.getNextIndex(-1),t=this.getNextIndex(1);return e.index!==this.currentIndex&&e.index!==i&&e.index!==t?!1:void(e.youTubeObject=new YT.Player("youtube"+e.index,{height:e.height,width:e.width,videoId:e.src,playerVars:{modestbranding:!0,rel:!1},events:{onReady:function(e){for(var i=e.target.getVideoData().video_id,t=0;t<tollMediaSwipe.gallery.length;t++)i===tollMediaSwipe.gallery[t].src&&(tollMediaSwipe.gallery[t].domObject=document.getElementById("youtube"+tollMediaSwipe.gallery[t].index),tollMediaSwipe.fitMedia(tollMediaSwipe.gallery[t]),tollMediaSwipe.addClass(tollMediaSwipe.gallery[t].domSlide,"loaded"))}}}))},MediaSwipe.prototype.getFitDimensions=function(e){var i,t,a,l,n,d,s=this.screenWidth>799?80:10,o=e.domContainer,r=e.width||e.videoWidth||e.offsetWidth,p=e.height||e.videoHeight||e.offsetHeight,h=r/p,w=o.offsetWidth-2*s,m=o.offsetHeight-2*s,u=w/m;return r>w||p>m?h>u?(i=w,t=w/h,a=-(r-i-2*s)/2,l=(m-p+2*s)/2,n=s,d=.5*(m-t)+s):(i=m*h,t=m,a=(w-r+2*s)/2,l=-(p-t-2*s)/2,n=.5*(w-i)+s,d=s):(a=.5*(w-r)+s,l=.5*(m-p)+s,i=r,t=p,n=a,d=l),{xPos:a,yPos:l,virtualWidth:i,virtualHeight:t,virtualXPos:n,virtualYPos:d,scale:i/r}},MediaSwipe.prototype.fitMedia=function(e){var i=this.getFitDimensions(e);e.virtualWidth=i.virtualWidth,e.virtualHeight=i.virtualHeight,e.virtualXPos=i.virtualXPos,e.virtualYPos=i.virtualYPos,e.virtualXOffset=0,e.virtualYOffset=0,e.isZoomed=!1,"image"===e.type?(e.scale=i.scale,e.minScale=i.scale,e.xPos=i.xPos,e.yPos=i.yPos,e.domObject.style.width=Math.ceil(e.width+1)+"px",e.domObject.style.height=Math.ceil(e.height+1)+"px"):"iframe"===e.type||"youtube"===e.type?(e.scale=1,e.xPos=i.virtualXPos,e.yPos=i.virtualYPos,e.domObject.width=Math.ceil(i.virtualWidth+1)+"px",e.domObject.height=Math.ceil(i.virtualHeight+1)+"px"):"siteplan"===e.type&&(e.scale=1,e.xPos=i.virtualXPos,e.yPos=i.virtualYPos,e.domObject.style.width=Math.ceil(i.virtualWidth+1)+"px",e.domObject.style.height=Math.ceil(i.virtualHeight+1)+"px"),e.domObject.style.position="absolute",e.domObject.style.left=Math.floor(e.xPos)+"px",e.domObject.style.top=Math.floor(e.yPos)+"px",this.transformMedia(e)},MediaSwipe.prototype.transformMedia=function(e,i,t,a){var l;if("undefined"!=typeof e.minScale&&(i!==!1&&i<e.minScale?i=e.minScale:i!==!1&&i>1.3&&(i=1.3)),"undefined"!=typeof i){i=i||e.scale||1,t=t||0,t+=e.lastVirtualXOffset||0,a=a||0,a+=e.lastVirtualYOffset||0;var n=150;e.isZoomed&&e.virtualXOffset>t&&e.virtualXOffset+e.virtualXPos<0&&e.virtualXOffset+e.virtualXPos+e.virtualWidth<this.screenWidth-n?t=e.virtualXOffset:e.isZoomed&&e.virtualXOffset<t&&e.virtualXOffset+e.virtualXPos>n&&e.virtualXOffset+e.virtualXPos+e.virtualWidth>this.screenWidth&&(t=e.virtualXOffset),e.isZoomed&&e.virtualYOffset>a&&e.virtualYOffset+e.virtualYPos<0&&e.virtualYOffset+e.virtualYPos+e.virtualHeight<this.screenHeight-n?a=e.virtualYOffset:e.isZoomed&&e.virtualYOffset<a&&e.virtualYOffset+e.virtualYPos>n&&e.virtualYOffset+e.virtualYPos+e.virtualHeight>this.screenHeight&&(a=e.virtualYOffset),l="translate("+t+"px,"+a+"px) scale("+i+")","undefined"!=typeof e.domObject&&(e.scale=i,e.virtualXOffset=t,e.virtualYOffset=a,e.virtualWidth=e.width*i,e.virtualHeight=e.height*i,e.virtualXPos=e.xPos+(e.width-e.virtualWidth)/2,e.virtualYPos=e.yPos+(e.height-e.virtualHeight)/2)}else l="translate("+e.virtualXOffset+"px,"+e.virtualYOffset+"px) scale("+e.scale+")";"undefined"!=typeof e.domObject?(e.domObject.style.webkitTransform=l,e.domObject.style.MozTransform=l,e.domObject.style.msTransform=l,e.domObject.style.OTransform=l,e.domObject.style.transform=l):(e.style.webkitTransform=l,e.style.MozTransform=l,e.style.msTransform=l,e.style.OTransform=l,e.style.transform=l)},MediaSwipe.prototype.resetSlide=function(e){"image"===e.type&&e.domObject!==!1&&"undefined"!=typeof e.domObject.ignoreOnLoad&&(e.domObject.ignoreOnLoad=!0),this.removeClass(e.domSlide,"loaded"),e.domContainer.innerHTML=""},MediaSwipe.prototype.resetSlides=function(){for(var e=0;e<this.gallery.length;e++)"image"===this.gallery[e].type&&this.gallery[e].domObject!==!1&&"undefined"!=typeof this.gallery[e].domObject.ignoreOnLoad&&(this.gallery[e].domObject.ignoreOnLoad=!0);this.removeClass(this.$currentSlide,"loaded"),this.removeClass(this.$previousSlide,"loaded"),this.removeClass(this.$nextSlide,"loaded"),this.$currentSlideContainer.innerHTML="",this.$previousSlideContainer.innerHTML="",this.$nextSlideContainer.innerHTML="",this.moveSlides(0)},MediaSwipe.prototype.getMediaProperties=function(e){for(var i="",t="",a={index:0,type:!1,src:!1,caption:!1,category:!1,width:0,height:0,xPos:0,yPos:0,scale:1,minScale:1,isZoomed:!1,disableTouchpad:!1,virtualHeight:0,virtualWidth:0,virtualXPos:0,virtualYPos:0,virtualXOffset:0,virtualYOffset:0,lastVirtualXOffset:0,lastVirtualYOffset:0,domSlide:!1,domContainer:!1,domObject:!1},l=0;l<e.attributes.length;l++)i=e.attributes[l].nodeName,t=e.getAttribute(i),"data-mmid"===i||"data-largeimg"===i||"data-img"===i||"data-image"===i||"href"===i?a.src=t:"data-caption"===i||"data-title"===i||"data-description"===i?a.caption=t:"data-rel"===i||"data-category"===i||"data-type"===i?a.category=t:"data-w"!==i&&"data-width"!==i||isNaN(t)?"data-h"!==i&&"data-height"!==i||isNaN(t)?"data-comm-id"===i&&(a.commId=parseInt(t)):a.height=parseInt(t):a.width=parseInt(t);if(a.src!==!1){if(/\.(jpg|png|gif)$/.test(a.src.toLowerCase()))a.type="image";else if(/\.(mp4)$/.test(a.src.toLowerCase()))a.type="mp4";else if(a.src.indexOf("youtube.com")>-1||a.src.indexOf("/embed/")>-1){a.type="youtube",a.disableTouchpad=!0,a.width=a.width||1200,a.height=a.height||675;var n=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/,d=a.src.match(n);if(!d||11!=d[7].length)return!1;a.src=d[7]}else"undefined"!=typeof a.commId?(a.type="siteplan",a.disableTouchpad=!0,a.width=a.width||1456,a.height=a.height||815):(a.type="iframe",a.disableTouchpad=!0,a.width=a.width||800,a.height=a.height||800);return a}return!1},MediaSwipe.prototype.getNextIndex=function(e){var i=this.currentIndex+e;return i>=this.gallery.length?0:0>i?this.gallery.length-1:i},MediaSwipe.prototype.addClass=function(e,i){e.className=e.className.replace(/^\s\s*/g,"").replace(/\s\s*$/g,"").replace(/\s\s+/g," ")+" "+i},MediaSwipe.prototype.removeClass=function(e,i){e.className=e.className.replace(new RegExp(i,"g"),"").replace(/^\s\s*/g,"").replace(/\s\s*$/g,"").replace(/\s\s+/g," ")},MediaSwipe.prototype.hasClass=function(e,i){for(var t=e.className,a=t.replace(/^\s\s*/g,"").replace(/\s\s*$/g,"").replace(/\s\s+/g," ").split(" "),l=0;l<a.length;l++)if(a[l]===i)return!0;return!1},MediaSwipe.prototype.moveSlides=function(e){this.moveSlide(e,0,this.$currentSlide),this.moveSlide(e,0,this.$previousSlide),this.moveSlide(e,0,this.$nextSlide)},MediaSwipe.prototype.moveSlide=function(e,i,t){t.style.webkitTransform="translate("+e+"px,"+i+"px)",t.style.MozTransform="translate("+e+"px,"+i+"px)",t.style.msTransform="translate("+e+"px,"+i+"px)",t.style.OTransform="translate("+e+"px,"+i+"px)",t.style.transform="translate("+e+"px,"+i+"px)"},MediaSwipe.prototype.closeGallery=function(){this.isActive=!1,this.animator.clearAnimations(),this.removeClass(this.$mediaSwipe,"on"),this.removeClass(this.$mediaSwipe,"mediaswipe-allow-arrows"),this.resetSlides()},MediaSwipe.prototype.animateSwipe=function(e,i){this.animator.animations.length&&(this.setSlides(this.currentIndex),this.animator.clearAnimations());var t=0>e?this.$previousSlide:this.$nextSlide;this.$futureSlide=t,this.currentIndex=this.getNextIndex(e),this.animator.animations.push({domObject:this.$currentSlide,time:270,xStart:i,xEnd:this.screenWidth*e*-1,callback:function(){tollMediaSwipe.setSlides(tollMediaSwipe.currentIndex),tollMediaSwipe.animator.clearAnimations()}}),this.animator.animations.push({domObject:t,time:270,xStart:i,xEnd:tollMediaSwipe.screenWidth*e*-1})},MediaSwipe.prototype.initiateListeners=function(){document.addEventListener("click",function(e){if(tollMediaSwipe.isActive===!1){var i=e.target;i.getAttribute("class")&&"undefined"!=typeof i.getAttribute("class")&&-1!==i.getAttribute("class").toLowerCase().indexOf("js-mediaswipe")&&(e.preventDefault(),tollMediaSwipe.gatherMedia(i),tollMediaSwipe.launch())}}),document.addEventListener("mouseout",function(e){e=e?e:window.event;var i=e.relatedTarget||e.toElement;i&&"HTML"!==i.nodeName||!tollMediaSwipe.pointerHandler.mouseDown||tollMediaSwipe.pointerHandler.doMouseUp(e)}),tollMediaSwipe.$mediaSwipeTouchpad.addEventListener("touchstart",function(e){e=e?e:window.event,tollMediaSwipe.isActive&&e.preventDefault(),1===e.targetTouches.length?tollMediaSwipe.pointerHandler.doMouseDown(e.targetTouches[0]):tollMediaSwipe.pointerHandler.setEvent(e.targetTouches[1],tollMediaSwipe.pointerHandler.secondStart)}),tollMediaSwipe.$mediaSwipeTouchpad.addEventListener("touchmove",function(e){if(e=e?e:window.event,tollMediaSwipe.isActive&&e.preventDefault(),1!==e.targetTouches.length||tollMediaSwipe.pointerHandler.zooming){if(e.targetTouches.length>=1&&tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].disableTouchpad===!1){tollMediaSwipe.pointerHandler.zooming!==!0&&(tollMediaSwipe.pointerHandler.zooming=!0,tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].startZoomWidth=tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].virtualWidth,tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].isZoomed=!0),tollMediaSwipe.pointerHandler.setEvent(e.targetTouches[0],tollMediaSwipe.pointerHandler.end),tollMediaSwipe.pointerHandler.setEvent(e.targetTouches[1],tollMediaSwipe.pointerHandler.secondEnd);var i=Math.sqrt(Math.pow(tollMediaSwipe.pointerHandler.secondStart.y-tollMediaSwipe.pointerHandler.start.y,2)+Math.pow(tollMediaSwipe.pointerHandler.secondStart.x-tollMediaSwipe.pointerHandler.start.x,2)),t=Math.sqrt(Math.pow(tollMediaSwipe.pointerHandler.secondEnd.y-tollMediaSwipe.pointerHandler.end.y,2)+Math.pow(tollMediaSwipe.pointerHandler.secondEnd.x-tollMediaSwipe.pointerHandler.end.x,2)),a=tollMediaSwipe.pointerHandler.secondEnd.x-tollMediaSwipe.pointerHandler.secondStart.x+(tollMediaSwipe.pointerHandler.end.x-tollMediaSwipe.pointerHandler.start.x)/2,l=tollMediaSwipe.pointerHandler.secondEnd.y-tollMediaSwipe.pointerHandler.secondEnd.y+(tollMediaSwipe.pointerHandler.end.y-tollMediaSwipe.pointerHandler.start.y)/2,n=(1.8*(t-i)+tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].startZoomWidth)/tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].width;tollMediaSwipe.transformMedia(tollMediaSwipe.gallery[tollMediaSwipe.currentIndex],n,a,l)}}else tollMediaSwipe.pointerHandler.doMouseMove(e.targetTouches[0])}),tollMediaSwipe.$mediaSwipeTouchpad.addEventListener("touchend",function(e){e=e?e:window.event,tollMediaSwipe.isActive&&e.preventDefault(),0===e.targetTouches.length&&tollMediaSwipe.pointerHandler.zooming===!1?tollMediaSwipe.pointerHandler.doMouseUp(e.changedTouches[0]):0===e.targetTouches.length&&tollMediaSwipe.pointerHandler.zooming?tollMediaSwipe.pointerHandler.zooming=!1:1===e.targetTouches.length&&tollMediaSwipe.pointerHandler.zooming&&(tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].lastVirtualXOffset=tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].virtualXOffset,tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].lastVirtualYOffset=tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].virtualYOffset)}),tollMediaSwipe.$mediaSwipeTouchpad.addEventListener("mousedown",function(e){e=e?e:window.event,tollMediaSwipe.pointerHandler.doMouseDown(e)}),tollMediaSwipe.$mediaSwipeTouchpad.addEventListener("mouseup",function(e){e=e?e:window.event,tollMediaSwipe.pointerHandler.doMouseUp(e)}),tollMediaSwipe.$mediaSwipeTouchpad.addEventListener("mousemove",function(e){e=e?e:window.event,tollMediaSwipe.pointerHandler.doMouseMove(e)}),document.getElementById("mediaswipe-close-button").addEventListener("click",function(e){e=e||window.event,e.preventDefault(),tollMediaSwipe.closeGallery()}),document.getElementById("mediaswipe-left-arrow").addEventListener("click",function(e){e=e||window.event,e.preventDefault(),tollMediaSwipe.isActive&&tollMediaSwipe.galleryLength>1&&tollMediaSwipe.animateSwipe(-1,0)}),document.getElementById("mediaswipe-right-arrow").addEventListener("click",function(e){e=e||window.event,e.preventDefault(),tollMediaSwipe.isActive&&tollMediaSwipe.galleryLength>1&&tollMediaSwipe.animateSwipe(1,0)}),document.onkeydown=function(e){if(tollMediaSwipe.isActive)switch(e=e||window.event,e.which||e.keyCode){case 39:tollMediaSwipe.galleryLength>1&&tollMediaSwipe.animateSwipe(1,0);break;case 37:tollMediaSwipe.galleryLength>1&&tollMediaSwipe.animateSwipe(-1,0);break;case 27:tollMediaSwipe.closeGallery()}},window.onresize=function(){if(tollMediaSwipe.screenWidth=window.innerWidth,tollMediaSwipe.screenHeight=window.innerHeight,tollMediaSwipe.isActive)for(var e=tollMediaSwipe.getNextIndex(-1),i=tollMediaSwipe.getNextIndex(1),t=[tollMediaSwipe.currentIndex,e,i],a=0;a<t.length&&(tollMediaSwipe.fitMedia(tollMediaSwipe.gallery[t[a]]),!(tollMediaSwipe.gallery.length<2));a++);}},MSPointerHandler.prototype.init=function(){this.start={x:0,y:0,time:-1},this.end={x:0,y:0,time:-1},this.secondStart={x:0,y:0,time:-1},this.secondEnd={x:0,y:0,time:-1},this.mouseDown=!1,this.swiping=!1,this.panning=!1,this.zooming=!1,this.lastPosition={x:0,y:0,time:-1},this.vX,this.vY},MSPointerHandler.prototype.setEvent=function(e,i){i.x=e.clientX,i.y=e.clientY,i.time=parseInt((new Date).getTime())},MSPointerHandler.prototype.doMouseDown=function(e){tollMediaSwipe.isActive&&(tollMediaSwipe.pointerHandler.setEvent(e,tollMediaSwipe.pointerHandler.start),tollMediaSwipe.pointerHandler.mouseDown=!0)},MSPointerHandler.prototype.doMouseUp=function(e){if(tollMediaSwipe.isActive)if(tollMediaSwipe.pointerHandler.mouseDown=!1,tollMediaSwipe.pointerHandler.setEvent(e,tollMediaSwipe.pointerHandler.end),tollMediaSwipe.pointerHandler.swiping){var i=tollMediaSwipe.pointerHandler.end.x-tollMediaSwipe.pointerHandler.start.x;if(Math.abs(i)>100){var t=i>0?-1:1;tollMediaSwipe.animateSwipe(t,i)}else{var t=i>0?-1:1,a=i>0?tollMediaSwipe.$previousSlide:tollMediaSwipe.$nextSlide;tollMediaSwipe.animator.animations.push({domObject:tollMediaSwipe.$currentSlide,time:270,xStart:i,xEnd:0,callback:function(){tollMediaSwipe.animator.clearAnimations(),tollMediaSwipe.removeClass(tollMediaSwipe.$mediaSwipe,"ms-grabbing"),tollMediaSwipe.removeClass(tollMediaSwipe.$mediaSwipe,"ms-grab")}}),tollMediaSwipe.animator.animations.push({domObject:a,time:270,xStart:i,xEnd:0})}tollMediaSwipe.pointerHandler.swiping=!1}else if(tollMediaSwipe.pointerHandler.panning)tollMediaSwipe.pointerHandler.panning=!1,tollMediaSwipe.removeClass(tollMediaSwipe.$mediaSwipe,"ms-grabbing"),tollMediaSwipe.addClass(tollMediaSwipe.$mediaSwipe,"ms-zoom-out"),(Math.abs(tollMediaSwipe.pointerHandler.vX)>8||Math.abs(tollMediaSwipe.pointerHandler.vY)>8)&&tollMediaSwipe.animator.animations.push({domObject:tollMediaSwipe.gallery[tollMediaSwipe.currentIndex],time:330,xStart:0,xEnd:6*tollMediaSwipe.pointerHandler.vX,yStart:0,yEnd:6*tollMediaSwipe.pointerHandler.vY,callback:function(){tollMediaSwipe.animator.clearAnimations(),tollMediaSwipe.removeClass(tollMediaSwipe.$mediaSwipe,"ms-grabbing"),tollMediaSwipe.removeClass(tollMediaSwipe.$mediaSwipe,"ms-grab"),tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].lastVirtualXOffset=tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].virtualXOffset,tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].lastVirtualYOffset=tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].virtualYOffset}}),tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].lastVirtualXOffset=tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].virtualXOffset,tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].lastVirtualYOffset=tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].virtualYOffset;else{var l=tollMediaSwipe.pointerHandler.withinImageBounds(e);if(l||tollMediaSwipe.closeGallery(),l&&tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].scale<1&&tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].isZoomed===!1&&tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].disableTouchpad===!1&&tollMediaSwipe.animator.animations.push({domObject:tollMediaSwipe.gallery[tollMediaSwipe.currentIndex],time:170,scaleStart:tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].scale,scaleEnd:1,callback:function(){tollMediaSwipe.animator.clearAnimations(),tollMediaSwipe.removeClass(tollMediaSwipe.$mediaSwipe,"ms-zoom-in"),tollMediaSwipe.addClass(tollMediaSwipe.$mediaSwipe,"ms-zoom-out"),tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].isZoomed=!0}}),l&&tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].isZoomed===!0){var n=tollMediaSwipe.getFitDimensions(tollMediaSwipe.gallery[tollMediaSwipe.currentIndex]);tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].lastVirtualXOffset=0,tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].lastVirtualYOffset=0,tollMediaSwipe.animator.animations.push({domObject:tollMediaSwipe.gallery[tollMediaSwipe.currentIndex],time:170,scaleStart:tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].scale,scaleEnd:n.scale,xStart:tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].virtualXOffset,xEnd:0,yStart:tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].virtualYOffset,yEnd:0,callback:function(){tollMediaSwipe.animator.clearAnimations(),tollMediaSwipe.removeClass(tollMediaSwipe.$mediaSwipe,"ms-zoom-out"),tollMediaSwipe.addClass(tollMediaSwipe.$mediaSwipe,"ms-zoom-in"),tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].isZoomed=!1}})}}},MSPointerHandler.prototype.doMouseMove=function(e){if(tollMediaSwipe.isActive)if(tollMediaSwipe.pointerHandler.mouseDown){var i=Math.sqrt(Math.pow(e.clientY-tollMediaSwipe.pointerHandler.start.y,2)+Math.pow(e.clientX-tollMediaSwipe.pointerHandler.start.x,2));if(i>10)if(tollMediaSwipe.gallery.length>1&&tollMediaSwipe.pointerHandler.swiping===!1&&tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].isZoomed===!1?tollMediaSwipe.pointerHandler.swiping=!0:tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].isZoomed===!0&&(tollMediaSwipe.pointerHandler.panning=!0),tollMediaSwipe.pointerHandler.swiping)tollMediaSwipe.moveSlides(e.clientX-tollMediaSwipe.pointerHandler.start.x),
tollMediaSwipe.hasClass(tollMediaSwipe.$mediaSwipe,"ms-grab")&&tollMediaSwipe.removeClass(tollMediaSwipe.$mediaSwipe,"ms-grab"),tollMediaSwipe.hasClass(tollMediaSwipe.$mediaSwipe,"ms-grabbing")||tollMediaSwipe.addClass(tollMediaSwipe.$mediaSwipe,"ms-grabbing");else if(tollMediaSwipe.pointerHandler.panning){var t={x:0,y:0,time:-1};tollMediaSwipe.pointerHandler.setEvent(e,t),tollMediaSwipe.pointerHandler.vX=t.x-tollMediaSwipe.pointerHandler.lastPosition.x,tollMediaSwipe.pointerHandler.vY=t.y-tollMediaSwipe.pointerHandler.lastPosition.y,tollMediaSwipe.pointerHandler.lastPosition=t,tollMediaSwipe.transformMedia(tollMediaSwipe.gallery[tollMediaSwipe.currentIndex],!1,t.x-tollMediaSwipe.pointerHandler.start.x,t.y-tollMediaSwipe.pointerHandler.start.y),tollMediaSwipe.hasClass(tollMediaSwipe.$mediaSwipe,"ms-zoom-out")&&tollMediaSwipe.removeClass(tollMediaSwipe.$mediaSwipe,"ms-zoom-out"),tollMediaSwipe.hasClass(tollMediaSwipe.$mediaSwipe,"ms-grabbing")||tollMediaSwipe.addClass(tollMediaSwipe.$mediaSwipe,"ms-grabbing")}}else{var a=tollMediaSwipe.pointerHandler.withinImageBounds(e);a?tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].scale<1&&tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].disableTouchpad===!1&&!tollMediaSwipe.hasClass(tollMediaSwipe.$mediaSwipe,"ms-zoom-in")?tollMediaSwipe.addClass(tollMediaSwipe.$mediaSwipe,"ms-zoom-in"):tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].scale>=1&&tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].disableTouchpad===!1&&tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].isZoomed&&!tollMediaSwipe.hasClass(tollMediaSwipe.$mediaSwipe,"ms-zoom-out")?tollMediaSwipe.addClass(tollMediaSwipe.$mediaSwipe,"ms-zoom-out"):tollMediaSwipe.galleryLength>1&&1===tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].scale&&!tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].disableTouchpad&&!tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].isZoomed&&!tollMediaSwipe.hasClass(tollMediaSwipe.$mediaSwipe,"ms-grab")&&tollMediaSwipe.addClass(tollMediaSwipe.$mediaSwipe,"ms-grab"):(tollMediaSwipe.hasClass(tollMediaSwipe.$mediaSwipe,"ms-zoom-in")&&tollMediaSwipe.removeClass(tollMediaSwipe.$mediaSwipe,"ms-zoom-in"),tollMediaSwipe.hasClass(tollMediaSwipe.$mediaSwipe,"ms-zoom-out")&&tollMediaSwipe.removeClass(tollMediaSwipe.$mediaSwipe,"ms-zoom-out"),tollMediaSwipe.hasClass(tollMediaSwipe.$mediaSwipe,"ms-grab")&&tollMediaSwipe.removeClass(tollMediaSwipe.$mediaSwipe,"ms-grab"))}},MSPointerHandler.prototype.withinImageBounds=function(e){var i={x:0,y:0,time:0};return this.setEvent(e,i),i.x>=tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].virtualXPos+tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].virtualXOffset&&i.x<=tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].virtualXPos+tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].virtualXOffset+tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].virtualWidth&&i.y>=tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].virtualYPos+tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].virtualYOffset&&i.y<=tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].virtualYPos+tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].virtualYOffset+tollMediaSwipe.gallery[tollMediaSwipe.currentIndex].virtualHeight?!0:!1},MSAnimator.prototype.init=function(){this.previousTime=this.getTheTime(),this.render()},MSAnimator.prototype.getTheTime=function(){return parseInt((new Date).getTime())},MSAnimator.prototype.clearAnimations=function(){this.animations=new Array},MSAnimator.prototype.render=function(){this.currentTime=this.getTheTime(),this.deltaTime=this.currentTime-this.previousTime;for(var e=0;e<this.animations.length;e++)if("undefined"==typeof this.animations[e].animating&&(this.animations[e].animating=!0),this.animations[e].animating){this.foundAnimation=!0,"undefined"==typeof this.animations[e].deltaTime&&(this.animations[e].deltaTime=0),"undefined"==typeof this.animations[e].scaleStart&&(this.animations[e].scaleStart=!1,this.animations[e].scaleEnd=!1),"undefined"==typeof this.animations[e].xStart&&(this.animations[e].xStart=!1,this.animations[e].xEnd=!1),"undefined"==typeof this.animations[e].yStart&&(this.animations[e].yStart=!1,this.animations[e].yEnd=!1);var i,t,a,l=this.animations[e].deltaTime/this.animations[e].time;this.animations[e].deltaTime>this.animations[e].time?(this.animations[e].animating=!1,l=1,i=this.animations[e].scaleStart!==!1?this.animations[e].scaleEnd:!1,t=this.animations[e].xStart!==!1?this.animations[e].xEnd:!1,a=this.animations[e].yStart!==!1?this.animations[e].yEnd:!1):(i=this.animations[e].scaleStart!==!1?this.easeOut(this.animations[e].deltaTime,this.animations[e].scaleStart,this.animations[e].scaleEnd-this.animations[e].scaleStart,this.animations[e].time):!1,t=this.animations[e].xStart!==!1?this.easeOut(this.animations[e].deltaTime,this.animations[e].xStart,this.animations[e].xEnd-this.animations[e].xStart,this.animations[e].time):!1,a=this.animations[e].yStart!==!1?this.easeOut(this.animations[e].deltaTime,this.animations[e].yStart,this.animations[e].yEnd-this.animations[e].yStart,this.animations[e].time):!1),tollMediaSwipe.transformMedia(this.animations[e].domObject,i,t,a),this.animations[e].deltaTime>this.animations[e].time&&"undefined"!=typeof this.animations[e].callback?this.animations[e].callback():this.animations[e].deltaTime+=this.deltaTime}this.previousTime=this.currentTime,this.foundAnimation=!1,window.requestAnimationFrame?window.requestAnimationFrame(this.render.bind(this)):window.msRequestAnimationFrame?window.msRequestAnimationFrame(this.render.bind(this)):window.webkitRequestAnimationFrame?window.webkitRequestAnimationFrame(this.render.bind(this)):window.mozRequestAnimationFrame?window.mozRequestAnimationFrame(this.render.bind(this)):window.oRequestAnimationFrame?window.oRequestAnimationFrame(this.render.bind(this)):"undefined"==typeof window.requestNextFrame&&(window.requestNextFrame=setInterval(function(){tollMediaSwipe.animator.render()},18))},MSAnimator.prototype.easeOut=function(e,i,t,a){return e/=a,-t*e*(e-2)+i};